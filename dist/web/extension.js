(()=>{var t={891:(t,e,n)=>{var o=n(549),i=o.window,r=o.workspace,a="$(checklist)",s="$(zap)",u={"TODO:":{text:"TODO:",color:"#fff",backgroundColor:"#ffbd2a",overviewRulerColor:"rgba(255,189,42,0.8)"},"FIXME:":{text:"FIXME:",color:"#fff",backgroundColor:"#f06292",overviewRulerColor:"rgba(240,98,146,0.8)"}},l={color:"#2196f3",backgroundColor:"#ffeb3b"};function c(t){return Array.isArray(t)?"{"+t.join(",")+"}":"string"==typeof t?t:""}function g(t,e,n,o){for(var i=t.uri.toString(),r=i.substring(7,i.length),a=0;a<t.lineCount;a++){var s=t.lineAt(a).text,u=s.match(o);if(null!==u){e.hasOwnProperty(r)||(e[r]=[]);var l=f(s,u);l.length>500&&(l=l.substring(0,500).trim()+"...");var c=p(i,r,s,a,u),g={uri:c.uri,label:l,detail:c.relativePath,lineNum:a,fileName:c.absPath,startCol:c.startCol,endCol:c.endCol};n.push(g),e[r].push(g)}}}function h(t){if(i.outputChannel)if(i.outputChannel.clear(),0!==t.length){var e=r.getConfiguration("todohighlight").get("toggleURI",!1);t.forEach((function(t,n,o){var r=["#"+(n+1)+"\t"+t.uri+"#"+(t.lineNum+1),"#"+(n+1)+"\t"+t.uri+":"+(t.lineNum+1)+":"+(t.startCol+1)],a=0;e&&(a=+!a),i.outputChannel.appendLine(r[a]),i.outputChannel.appendLine("\t"+t.label+"\n")})),i.outputChannel.show()}else i.showInformationMessage("No results")}function f(t,e){return t.substring(t.indexOf(e[0]),t.length)}function p(t,e,n,o,i){var a=r.rootPath+"/",s=e.replace(a,""),u=n.indexOf(i[0]);return{uri:t,absPath:e,relativePath:s+" "+(o+1)+":"+(u+1),startCol:u,endCol:n.length}}function d(t){i.processing=!0,v(a,"0"),console.log("todohighlight err:",t)}function v(t,e,n){i.statusBarItem&&(i.statusBarItem.text=`${t} ${e}`||"",n&&(i.statusBarItem.tooltip=n),i.statusBarItem.show())}t.exports={DEFAULT_STYLE:l,getAssembledData:function(t,e,n){var o={};return t.forEach((t=>{var i=(t="string"==typeof t?{text:t}:t).text;i&&(n||(i=i.toUpperCase()),"TODO:"!=i&&"FIXME:"!=i||(t=Object.assign({},u[i],t)),o[i]=Object.assign({},l,e,t))})),Object.keys(u).forEach((t=>{o[t]||(o[t]=Object.assign({},l,e,u[t]))})),o},chooseAnnotationType:function(t){return i.showQuickPick(t,{})},searchAnnotations:function(t,e,n){var o=r.getConfiguration("todohighlight"),a=c(o.get("include"))||"{**/*}",u=c(o.get("exclude")),l=o.get("maxFilesForSearch",5120),h=" Searching...";i.processing=!0,v(s,h),r.findFiles(a,u,l).then((function(o){if(o&&0!==o.length)for(var a=o.length,u=0,l=0,c={},f=[],p=0;p<a;p++)r.openTextDocument(o[p]).then((function(t){g(t,c,f,e),m()}),(function(t){d(t),m()}));else n({message:"No files found"});function m(){l++,u=Math.floor(l/a*100),v(s,u+"% "+h),(l===a||i.manullyCancel)&&(i.processing=!0,t.update("annotationList",f),n(null,c,f))}}),(function(t){d(t)}))},annotationsFound:function(t,e,n){if(t)return console.log("todohighlight err:",t),void v(a,"0");var o=n.length;v(a,o,o+" result(s) found"),h(n)},createStatusBarItem:function(){var t=i.createStatusBarItem(o.StatusBarAlignment.Left);return t.text="$(checklist)0",t.tooltip="List annotations",t.command="todohighlight.showOutputChannel",t},setStatusMsg:v,showOutputChannel:h,escapeRegExp:function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}},549:t=>{"use strict";t.exports=require("vscode")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}var o={};(()=>{var t=o,e=n(549),i=n(891),r=e.window,a=e.workspace;t.activate=function(t){var n,o,s,u,l,c,g=null,h=r.activeTextEditor,f=t.workspaceState,p=a.getConfiguration("todohighlight");function d(){if(h&&h.document){for(var t,o=h.document.getText(),i={};t=u.exec(o);){var a=h.document.positionAt(t.index),g=h.document.positionAt(t.index+t[0].length),f={range:new e.Range(a,g)},d=t[0];n||(d=d.toUpperCase()),i[d]?i[d].push(f):i[d]=[f],c.trim()&&!s[d]&&(s[d]=r.createTextEditorDecorationType(l))}Object.keys(s).forEach((t=>{n||(t=t.toUpperCase());var e=p.get("isEnable")&&i[t]?i[t]:[],o=s[t];h.setDecorations(o,e)}))}}function v(t){var a=t.get("defaultStyle");c=t.get("keywordsPattern"),n=t.get("isCaseSensitive",!0),r.statusBarItem||(r.statusBarItem=i.createStatusBarItem()),r.outputChannel||(r.outputChannel=r.createOutputChannel("TodoHighlight")),s={},c.trim()?(l=Object.assign({},i.DEFAULT_STYLE,a,{overviewRulerLane:e.OverviewRulerLane.Right}),u=c):(o=i.getAssembledData(t.get("keywords"),a,n),Object.keys(o).forEach((t=>{n||(t=t.toUpperCase());var i=Object.assign({},{overviewRulerLane:e.OverviewRulerLane.Right},o[t]);i.overviewRulerColor||(i.overviewRulerColor=i.backgroundColor),s[t]=r.createTextEditorDecorationType(i)})),u=Object.keys(o).map((t=>i.escapeRegExp(t))).join("|")),u=new RegExp(u,"gi"),n&&(u=new RegExp(u,"g"))}function m(){g&&clearTimeout(g),g=setTimeout(d,0)}v(p),t.subscriptions.push(e.commands.registerCommand("todohighlight.toggleHighlight",(function(){p.update("isEnable",!p.get("isEnable"),!0).then((function(){m()}))}))),t.subscriptions.push(e.commands.registerCommand("todohighlight.listAnnotations",(function(){if(c.trim())i.searchAnnotations(f,u,i.annotationsFound);else{if(!o)return;var t=Object.keys(o);t.unshift("ALL"),i.chooseAnnotationType(t).then((function(t){if(t){var e=u;"ALL"!=t&&(t=i.escapeRegExp(t),e=new RegExp(t,n?"g":"gi")),i.searchAnnotations(f,e,i.annotationsFound)}}))}}))),t.subscriptions.push(e.commands.registerCommand("todohighlight.showOutputChannel",(function(){var t=f.get("annotationList",[]);i.showOutputChannel(t)}))),h&&m(),r.onDidChangeActiveTextEditor((function(t){h=t,t&&m()}),null,t.subscriptions),a.onDidChangeTextDocument((function(t){h&&t.document===h.document&&m()}),null,t.subscriptions),a.onDidChangeConfiguration((function(){(p=a.getConfiguration("todohighlight")).get("isEnable")&&(v(p),m())}),null,t.subscriptions)}})();var i=exports;for(var r in o)i[r]=o[r];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();